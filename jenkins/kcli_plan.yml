parameters:
 image: CentOS-7-x86_64-GenericCloud.qcow2
 memory: 8192
 network: default
 pool: default
 notify: true
 notifycmd: echo "Jenkins available at http://$(hostname -I | cut -d' ' -f1):8080 with password $(cat /var/lib/jenkins/secrets/initialAdminPassword)"

jenkins:
 image: {{ image }}
 memory: {{ memory }}
 numcpus: 2
 nets:
  - {{ network }}
 disks:
  - size: 40
 pool: {{ pool }}
 reservedns: true
 notify: {{ notify }}
 notifycmd: {{ notifycmd }}
 cmds: 
  - yum -y install wget
  - wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat/jenkins.repo
  - rpm --import https://pkg.jenkins.io/redhat/jenkins.io.key
  - yum -y install java jenkins
  - systemctl enable jenkins
  - systemctl start jenkins
